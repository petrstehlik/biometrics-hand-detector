\section{Hardware}
\label{sec:hw}

In this section we describe the hardware we used in the process of creating the device.

\subsection{Hardware Setup}
% TODO: čo bolo treba vytvoriť na sprovoznenie
% zapojenie arduino, raspberry
% popísať prečo je potreba arduino a púrečo je pi zlé (GPIO 3.3V vs 5V)
% schema konstrukcie / foto


\subsubsection*{Camera}
The selected camera is Basler raL6144-16gm. This camera provides us with the resolution of 6144 $\times$ 1 pixels with line rate up to 17 kHz. The captured image is in greyscale colors which for our use case is the desired output. The camera's shutter can be operated either via hardware or software trigger\footnote{The camera also disposes of "free-run mode".}.

The camera is equipped with AF Nikkor 50mm f1.8D lens. The lens suits our needs for multiple reason. It is relatively inexpensive, simple to use and has good depth-of-field control with aperture ranging from f/1.8 up to f/22.

\subsubsection*{Camera Mounting}
In order to acquire images with line camera either the object or camera has to move in smooth direct line. We decided to move the camera for various reason. The main reason is the human error. People can easily place a hand on a firm stable surface and keep the hand as it is for a long period of time, in our case no more than 30 seconds.

The camera is mounted on a slide rail with stepper motor with the platform facing down in order to mount the camera and light as seen in figure \ref{fig:rail}. The slide rail itself is mounted on an aluminium scaffolding which raises the rail to the desired height.

\begin{figure}[h]
    \label{fig:rail}
    \centering
    \includegraphics[width=0.75\linewidth]{rail.jpg}
    \caption{Camera mount setup. ** tohle se jeste jednou vyfoti **}
\end{figure}

\subsubsection*{Slide Rail \& Stepper Motor}
We proposed for straight and smooth movement in one axis a slide rail controlled by a stepper motor. The stepper motor itself is controlled by Leadshine EM705 Digital Stepper Drive which is controlled by pulse width modulation generated by Arduino UNO with our custom code generating 976 Hz PWM with 50\% duty cycle.

The PWM can be calculated as follows:

$PWM_{Frequency} = 16000000 / (Prescale\_Factor * 256)$

where $Prescale\_Factor$ can be set to 1, 8, 64, 256 or 1024. The default value is 64 which results in aforementioned 976 Hz PWM.

\subsection{Hand Placement}
The hand is placed in the centre of the scaffolding on a prepared foundation which aligns and spreads the fingers in order to always capture the same hand geometry. The hand stays put during the whole image acquisition procedure which minimizes the human error.

\begin{figure}[h]
    \label{fig:rail}
    \centering
    \includegraphics[width=0.5\linewidth]{rail.jpg}
    \includegraphics[width=0.5\linewidth]{rail.jpg}
    \caption{Tu bude neci ruka s deskou ** tohle se jeste jednou vyfoti **}
\end{figure}


\subsection{Slide Rail Control}
The stepper motor's speed is controled by the PWM. Next we can control the direction and \texttt{ENABLE} state. Both of the leads are connected to the Arduino UNO as seen in figure \ref{fig:arduino}

\begin{figure}[h]
    \label{fig:arduino}
    \centering
    \includegraphics[width=0.5\linewidth]{arduino.jpg}
    \caption{Schematics for Arduino UNO and stepper motor connection ** tohle se jeste dodela **}
\end{figure}

{\LARGE Here should be the calculation of speed}

In order to provide remote control the Arduino UNO is connected via GPIO to a Raspberry Pi 3 which controls the \texttt{DIRECTION} and \texttt{ENABLE} pins on the Arduino UNO board. The Raspberry Pi GPIO pins, using BCM notation, are used as follows:

\begin{itemize}
    \item PIN  5 - \texttt{DIRECTION} control
    \item PIN  6 - \texttt{ENABLE} control
\end{itemize}


\subsection{Light Control}
\subsection{Camera Control}
%TODO: ako je ovladana kamera a prečo je to takto
% aka je vykonnost kamery a ake nastavenia prebehli
% ake je nastavenie osvetlenia -> pripadne samostatna sekcia o osvetleni
